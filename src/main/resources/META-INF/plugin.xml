<idea-plugin>
    <id>org.dimdev.knit</id>
    <name>Knit</name>
    <version>${version}</version>
    <vendor url="https://www.dimdev.org">Dimensional Development</vendor>

    <description>
        <![CDATA[
        <p>Adds support for editing Enigma mappings directly in IntelliJ.</p>

        <h2>Instructions</h2>

        <h3>Setting up Minecraft sources</h3>
        <ol>
            <li>Set up a gradle project with <a href="https://paste.dimdev.org/raw/yoxamudixi">this build.gradle (last updated for 18w50a)</a>.</li>
            <li>Export source code from enigma to src/main/java</li>
            <li>Open the project in IntelliJ with the plugin installed</li>
            <li>Move all classes in the default package to a new package named "nopackage" (can't be named something else)</li>
            <li>Do a regex find-replace (Ctrl-Shift-R, check "Regex") and replace "\n\nimport" with "\n\nimport nopackage;\nimport"</li>
        </ol>

        <h3>Enabling remapping</h3>
        <ol>
            <li>Click "Refactor | Enable Remapping" and select the Enigma "mappings" folder</li>
            <li>Rename classes, fields, methods, and parameters through Shift-F6</li>
            <li>Save every once in a while using "Refactor | Save Mappings"</li>
        </ol>

        <p><i>Note 1:</i> You may want to disable IntelliJ's "search and strings and comments" feature since it can lead to false matches
        when renaming obfuscated names. To do this, you can press Shift-F6 twice when renaming the first name and unchecking all boxes.
        It will stay disabled for the current project until you manually re-enable it.</p>

        <p><i>Note 2:</i> Undo is not yet supported. If you want to change a name after renaming it, just rename it again. If you accidentally
        undo, just redo and change the name.</p>

        <h2>Source code</h2>

        <a href="https://github.com/DimensionalDevelopment/knit">https://github.com/DimensionalDevelopment/knit</a></p>
        ]]>
    </description>

    <change-notes>
        <![CDATA[
        <b>1.0.3</b>
        <ul>
            <li>Fixed bugs related to nested classes</li>
            <li>Fixed issue with moving classes twice</li>
        </ul>
        <b>1.0.2</b>
        <ul>
            <li>Fixed class mappings not being created</li>
            <li>Fixed libraries being included both in plugin zip and Knit jar</li>
            <li>Fixed renaming constructor parameters not working</li>
            <li>Added support for classes in default package</li>
            <li>Improved instructions</li>
        </ul>
        <b>1.0.1</b>
        <ul>
            <li>Updated Enigma version</li>
        </ul>
        <b>1.0</b>
            <li>Initial release</li>
        ]]>
    </change-notes>

    <idea-version since-build="173.0"/>

    <extensions defaultExtensionNs="com.intellij">
        <applicationInitializedListener implementation="org.dimdev.knit.KnitApplicationInitializedListener"/>
        <applicationService serviceImplementation="org.dimdev.knit.MappingsService"/>
        <refactoring.elementListenerProvider implementation="org.dimdev.knit.KnitRefactoringListenerProvider"/>
    </extensions>

    <actions>
        <action id="Knit.EnableRemapping" class="org.dimdev.knit.EnableRemappingAction" text="Enable Remapping" description="Enable or disable remapping mode">
            <add-to-group group-id="RefactoringMenu"/>
        </action>

        <action id="Knit.SaveMappings" class="org.dimdev.knit.SaveMappingsAction" text="Save Mappings" description="Save mappings to directory they were loaded from">
            <add-to-group group-id="RefactoringMenu"/>
        </action>
    </actions>
</idea-plugin>
